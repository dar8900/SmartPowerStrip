<!DOCTYPE html>
<html>
    <head>
        <title>Smart Power-Strip</title>
        <script>
		Rele1Str = "";
		Rele2Str = "";
		Rele3Str = "";
		Rele4Str = "";
		Rele5Str = "";
		Rele6Str = "";
		Rele7Str = "";
		Rele8Str = "";
		
		var RELE1State = 0;
		var RELE2State = 0;
		var RELE3State = 0;
		var RELE4State = 0;
		var RELE5State = 0;
		var RELE6State = 0;
		var RELE7State = 0;
		var RELE8State = 0;
		function GetArduinoIO()
		{
			nocache = "&nocache=" + Math.random() * 1000000;
			var request = new XMLHttpRequest();
			request.onreadystatechange = function()
			{
				if (this.readyState == 4) {
					if (this.status == 200) {
						if (this.responseXML != null) {
							// XML file received - contains analog values, switch values and LED states
							var count;
							// RELE 1
							if (this.responseXML.getElementsByTagName('RELE')[0].childNodes[0].nodeValue === "on") 
							{
								document.getElementById("RELE1").innerHTML = "RELE 1 is ON";
								RELE1State = 1;
							}
							else 
							{
								document.getElementById("RELE1").innerHTML = "RELE 1 is OFF";
								RELE2State = 0;
							}
							// RELE 2
							if (this.responseXML.getElementsByTagName('RELE')[1].childNodes[0].nodeValue === "on")
							{
								document.getElementById("RELE2").innerHTML = "RELE 2 is ON";
								RELE2State = 1;
							}
							else 
							{
								document.getElementById("RELE2").innerHTML = "RELE 2 is OFF";
								RELE1State = 0;
							}
							 // RELE 3
							if (this.responseXML.getElementsByTagName('RELE')[2].childNodes[0].nodeValue === "on")
							{
								document.getElementById("RELE3").innerHTML = "RELE 3 is ON";
								RELE3State = 1;
							}
							else 
							{
								document.getElementById("RELE3").innerHTML = "RELE 3 is OFF";
								RELE3State = 0;
							}
							  // RELE 4
							if (this.responseXML.getElementsByTagName('RELE')[3].childNodes[0].nodeValue === "on")
							{
								document.getElementById("RELE4").innerHTML = "RELE 4 is ON";
								RELE4State = 1;
							}
							else 
							{
								document.getElementById("RELE4").innerHTML = "RELE 4 is OFF";
								RELE4State = 0;
							}
							 // RELE 5
							if (this.responseXML.getElementsByTagName('RELE')[4].childNodes[0].nodeValue === "on")
							{
								document.getElementById("RELE5").innerHTML = "RELE 5 is ON";
								RELE5State = 1;
							}
							else
							{
								document.getElementById("RELE5").innerHTML = "RELE 5 is OFF";
								RELE5State = 0;
							}
							 // RELE 6
							if (this.responseXML.getElementsByTagName('RELE')[5].childNodes[0].nodeValue === "on") 
							{
								document.getElementById("RELE6").innerHTML = "RELE 6 is ON";
								RELE6State = 1;
							}
							else 
							{
								document.getElementById("RELE6").innerHTML = "RELE 6 is OFF";
								RELE6State = 0;
							}
							 // RELE 7
							if (this.responseXML.getElementsByTagName('RELE')[6].childNodes[0].nodeValue === "on")
							{
								document.getElementById("RELE7").innerHTML = "RELE 7 is ON";
								RELE7State = 1;
							}
							else 
							{
								document.getElementById("RELE7").innerHTML = "RELE 7 is OFF";
								RELE7State = 0;
							}
							 // RELE 8
							if (this.responseXML.getElementsByTagName('RELE')[7].childNodes[0].nodeValue === "on")
							{
								document.getElementById("RELE8").innerHTML = "RELE 8 is ON";
								RELE8State = 1;
							}
							else 
							{
								document.getElementById("RELE8").innerHTML = "RELE 8 is OFF";
								RELE8State = 0;
							}
						}
					}
				}
			}
			// send HTTP GET request with LEDs to switch on/off if any
			request.open("GET", "ajax_inputs" + Rele1Str + Rele2Str + Rele3Str + Rele4Str + Rele5Str +
                		Rele6Str + Rele7Str + Rele8Str + nocache, true);
			request.send(null);
			setTimeout('GetArduinoIO()', 500);
			Rele1Str = "";
			Rele2Str = "";			
			Rele3Str = "";			
			Rele4Str = "";			
			Rele5Str = "";			
			Rele6Str = "";			
			Rele7Str = "";			
			Rele8Str = "";			
		}
		
		function GetRele1()
		{
			if (RELE1State === 1) {
				RELE1State = 0;
				Rele1Str = "&RELE1=0";
			}
			else {
				RELE1State = 1;
				Rele1Str = "&RELE1=1";
			}
		}
		function GetRele2()
		{
			if (RELE2State === 1) {
				RELE2State = 0;
				Rele2Str = "&RELE2=0";
			}
			else {
				RELE2State = 1;
				Rele2Str = "&RELE2=1";
			}
		}
		function GetRele3()
		{
			if (RELE3State === 1) {
				RELE3State = 0;
				Rele3Str = "&RELE3=0";
			}
			else {
				RELE3State = 1;
				Rele3Str = "&RELE3=1";
			}
		}
		function GetRele4()
		{
			if (RELE4State === 1) {
				RELE4State = 0;
				Rele4Str = "&RELE4=0";
			}
			else {
				RELE4State = 1;
				Rele4Str = "&RELE4=1";
			}
		}
		function GetRele5()
		{
			if (RELE5State === 1) {
				RELE5State = 0;
				Rele5Str = "&RELE5=0";
			}
			else {
				RELE5State = 1;
				Rele5Str = "&RELE5=1";
			}
		}
		function GetRele6()
		{
			if (RELE6State === 1) {
				RELE6State = 0;
				Rele6Str = "&RELE6=0";
			}
			else {
				RELE6State = 1;
				Rele6Str = "&RELE6=1";
			}
		}
		function GetRele7()
		{
			if (RELE7State === 1) {
				RELE7State = 0;
				Rele7Str = "&RELE7=0";
			}
			else {
				RELE7State = 1;
				Rele7Str = "&RELE7=1";
			}
		}
		function GetRele8()
		{
			if (RELE8State === 1) {
				RELE8State = 0;
				Rele8Str = "&RELE8=0";
			}
			else {
				RELE8State = 1;
				Rele8Str = "&RELE8=1";
			}
		}
	</script>
	<style>
	table, th, td 
		{
			border: 1px solid black;
			border-collapse: collapse;
			background-color: lavander;
		}
		th
		{
			height: 50px;
			border-bottom: 1px solid #ddd;
			font-family:"Verdana";
			font-size:23px;
		}
		td
		{
			padding: 10px;
			text-align: center;
			border-bottom: 1px solid #ddd;
			font-size:20px
		}
		tr:hover {background-color:#f5f5f5;}
		.button 
		{
			background-color: #6495ED;
			border: black;
			padding: 10px 28px;
			text-align: center;
			text-decoration: none;
			display: inline-block;
			font-size: 16px;
			margin: 4px 2px;
			cursor: pointer;
			border-radius: 8px;
			box-shadow: 0 8px 16px 0 rgba(0,0,0,0.2), 0 6px 20px 0 rgba(0,0,0,0.19);
			color:white;
		}
		.button:active 
		{
			background-color: #8B0000;
			box-shadow: 0 5px #666;
			transform: translateY(3px);
		}
		h1 {
			font-size: 60px;
			font-family:"Verdana";
			color: blue;
			text-align:center;
		}
		h2 {
			font-size: 45px;
			font-family:"Verdana";
			color: MediumAquaMarine ;
			text-align:center;
		}
		p {
			font-size: 10px;
			color: black;
			style="text-align:left;"
		}
		.small_text {
			font-size: 70%;
			color: #737373;
		}
	</style>
    </head>
    <body onload="GetArduinoIO();" style="background: linear-gradient(to top, #ffffff 80%, #ccffff 100%);">
        <h1>Smart Power-Strip</h1>
		<h2>Gestione delle prese e controllo tempi</h2>
				<!--
		<div class="IO_box">
		
		<h2>RELEs Using Buttons</h2>

			<button type="button" id="RELE1" onclick="GetRele1()">RELE 1 is OFF</button><br /><br />
			<button type="button" id="RELE2" onclick="GetRele2()">RELE 2 is OFF</button><br /><br />
			<button type="button" id="RELE3" onclick="GetRele3()">RELE 3 is OFF</button><br /><br />
			<button type="button" id="RELE4" onclick="GetRele4()">RELE 4 is OFF</button><br /><br />
			<button type="button" id="RELE5" onclick="GetRele5()">RELE 5 is OFF</button><br /><br />
			<button type="button" id="RELE6" onclick="GetRele6()">RELE 6 is OFF</button><br /><br />
			<button type="button" id="RELE7" onclick="GetRele7()">RELE 7 is OFF</button><br /><br />
			<button type="button" id="RELE8" onclick="GetRele8()">RELE 8 is OFF</button><br /><br />
		</div>
		-->
		<table style="width:100%;" border="1px solid black;">
			<tr style="background-color:LightSkyBlue ;"><th>NOME PRESA</th><th>Accensione / Spegnimento</th><th>Tempo Accensione</th><th>Timer Presa</th></tr>
			<tr><th style="background-color:DarkRed	;">PRESA 1</th><td><button class="button" id="RELE1" onclick="GetRele1()">Presa 1 è spenta</button></td><td>00:00</td><td>00:00</td></tr>
			<tr><th style="background-color:DarkRed	;">PRESA 2</th><td><button class="button" id="RELE2" onclick="GetRele2()">Presa 2 è spenta</button></td><td>00:00</td><td>00:00</td></tr>
			<tr><th style="background-color:DarkRed	;">PRESA 3</th><td><button class="button" id="RELE3" onclick="GetRele3()">Presa 3 è spenta</button></td><td>00:00</td><td>00:00</td></tr>
			<tr><th style="background-color:DarkRed	;">PRESA 4</th><td><button class="button" id="RELE4" onclick="GetRele4()">Presa 4 è spenta</button></td><td>00:00</td><td>00:00</td></tr>
			<tr><th style="background-color:DarkRed	;">PRESA 5</th><td><button class="button" id="RELE5" onclick="GetRele5()">Presa 5 è spenta</button></td><td>00:00</td><td>00:00</td></tr>
			<tr><th style="background-color:DarkRed	;">PRESA 6</th><td><button class="button" id="RELE6" onclick="GetRele6()">Presa 6 è spenta</button></td><td>00:00</td><td>00:00</td></tr>
			<tr><th style="background-color:DarkRed	;">PRESA 7</th><td><button class="button" id="RELE7" onclick="GetRele7()">Presa 7 è spenta</button></td><td>00:00</td><td>00:00</td></tr>
			<tr><th style="background-color:DarkRed	;">PRESA 8</th><td><button class="button" id="RELE8" onclick="GetRele8()">Presa 8 è spenta</button></td><td>00:00</td><td>00:00</td></tr>
		</table>
		<p>Dario Cavedale</p>
    </body>
</html>
